<!DOCTYPE html>
<html>
  <head>
    <title>WebAssembly Demo</title>
    <meta charset="utf-8">
  </head>
  <body>
    <div>
      Using libebur128 version <span id="version">?.?.?</span>
      <script type="text/javascript">
        var Module = {
          onRuntimeInitialized: () => {
            const ptrMajor = Module._malloc(4);
            const ptrMinor = Module._malloc(4);
            const ptrPatch = Module._malloc(4);

            Module._ebur128_get_version(ptrMajor, ptrMinor, ptrPatch);

            const version = {
              major: Module.getValue(ptrMajor, 'i32'),
              minor: Module.getValue(ptrMinor, 'i32'),
              patch: Module.getValue(ptrPatch, 'i32')
            }
            document.getElementById('version').innerText = `${version.major}.${version.minor}.${version.patch}`;
          }
        }
      </script>
      <script src="./ebur128.js"></script>
    </div>
  </body>
</html>
